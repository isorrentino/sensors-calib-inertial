<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of symvariable</title>
  <meta name="keywords" content="symvariable">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # src --><!-- ../menu.html utils --><!-- menu.html quadfit -->
<h1>symvariable
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="symvariable.html" class="code" title="">symvariable</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="quadmake.html" class="code" title="function quadmake(kind)">quadmake</a>	Builds covariance matrices for quadratic forms.</li><li><a href="symcrosscov.html" class="code" title="function C = symcrosscov(phi1, phi2, sysvars)">symcrosscov</a>	Compensation for observation cross-covariance matrix.</li><li><a href="symvard.html" class="code" title="">symvard</a>	</li><li><a href="symvariable.html" class="code" title="">symvariable</a>	</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function sv = symvariable(arg)</a></li><li><a href="#_sub2" class="code">function sv = copy(sv, name)</a></li><li><a href="#_sub3" class="code">function tf = eq(lhs, rhs)</a></li><li><a href="#_sub4" class="code">function tf = ne(lhs, rhs)</a></li><li><a href="#_sub5" class="code">function tf = lt(lhs, rhs)</a></li><li><a href="#_sub6" class="code">function [svsorted,ix] = sort(sv)</a></li><li><a href="#_sub7" class="code">function str = char(sv)</a></li><li><a href="#_sub8" class="code">function disp(sv)</a></li><li><a href="#_sub9" class="code">function display(sv)</a></li><li><a href="#_sub10" class="code">function n = names(sv)</a></li><li><a href="#_sub11" class="code">function tf = scalareq(lhs, rhs)</a></li><li><a href="#_sub12" class="code">function tf = scalarlt(lhs, rhs)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="symvariable.html" class="code" title="">symvariable</a>
0002 <span class="comment">% Symbolic variable in a symbolic expression.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Examples:</span>
0005 <span class="comment">%    x = symvariable('x')   constructs a new symbolic variable x</span>
0006 <span class="comment">%    p = sympoly(x)         constructs a univariate symbolic polynomial of</span>
0007 <span class="comment">%                           the symbolic variable x</span>
0008 <span class="comment">%    x == copy(x)           returns true</span>
0009 <span class="comment">%</span>
0010 <span class="comment">% See also: sympoly, symvard</span>
0011 
0012 <span class="comment">% Copyright 2009-2011 Levente Hunyadi</span>
0013     properties (SetAccess = protected)
0014         Name;
0015     <span class="keyword">end</span>
0016     methods
0017         <a name="_sub0" href="#_subfunctions" class="code">function sv = symvariable(arg)</a>
0018         <span class="comment">% Create a new symbolic variable for use in a symbolic polynomial.</span>
0019 
0020             validateattributes(arg, {<span class="string">'symvariable'</span>,<span class="string">'char'</span>}, {<span class="string">'nonempty'</span>});
0021             <span class="keyword">if</span> ischar(arg)
0022                 validateattributes(arg, {<span class="string">'char'</span>}, {<span class="string">'nonempty'</span>,<span class="string">'row'</span>});
0023                 sv.Name = arg;
0024             <span class="keyword">elseif</span> isa(arg, <span class="string">'symvariable'</span>)  <span class="comment">% copy constructor</span>
0025                 sv.Name = arg.Name;
0026             <span class="keyword">end</span>
0027         <span class="keyword">end</span>
0028 
0029         <a name="_sub1" href="#_subfunctions" class="code">function sv = copy(sv, name)</a>
0030         <span class="comment">% Copy and rename a symbolic variable.</span>
0031         <span class="comment">%</span>
0032         <span class="comment">% Inheritor classes do not need to override this method.</span>
0033 
0034             <span class="keyword">if</span> nargin &gt; 1
0035                 validateattributes(name, {<span class="string">'char'</span>}, {<span class="string">'nonempty'</span>,<span class="string">'row'</span>});
0036                 sv.Name = name;
0037             <span class="keyword">end</span>
0038         <span class="keyword">end</span>
0039 
0040         <a name="_sub2" href="#_subfunctions" class="code">function tf = eq(lhs, rhs)</a>
0041         <span class="comment">% Test whether two objects refer to the same symbolic variable.</span>
0042         <span class="comment">%</span>
0043         <span class="comment">% Inheritor classes do not need to override this method.</span>
0044 
0045             <span class="keyword">if</span> isscalar(lhs) &amp;&amp; isscalar(rhs)
0046                 tf = <a href="#_sub11" class="code" title="subfunction tf = scalareq(lhs, rhs)">scalareq</a>(lhs, rhs);
0047             <span class="keyword">elseif</span> isscalar(rhs)
0048                 tf = false(size(lhs));
0049                 <span class="keyword">for</span> k = 1 : numel(lhs)
0050                     tf(k) = <a href="#_sub11" class="code" title="subfunction tf = scalareq(lhs, rhs)">scalareq</a>(lhs(k), rhs);
0051                 <span class="keyword">end</span>
0052             <span class="keyword">elseif</span> isscalar(lhs)
0053                 tf = false(size(rhs));
0054                 <span class="keyword">for</span> k = 1 : numel(rhs)
0055                     tf(k) = <a href="#_sub11" class="code" title="subfunction tf = scalareq(lhs, rhs)">scalareq</a>(lhs, rhs(k));
0056                 <span class="keyword">end</span>
0057             <span class="keyword">else</span>
0058                 assert(all(size(lhs) == size(rhs)), <span class="keyword">...</span><span class="comment">  % verify if they are compatible in size</span>
0059                     <span class="string">'math:symvariable:DimensionMismatch'</span>, <span class="keyword">...</span>
0060                     <span class="string">'Comparison attempted on symbolic variable arrays of incompatible size.'</span>);
0061 
0062                 tf = false(size(lhs));
0063                 <span class="keyword">for</span> k = 1 : numel(lhs)
0064                     tf(k) = <a href="#_sub11" class="code" title="subfunction tf = scalareq(lhs, rhs)">scalareq</a>(lhs(k), rhs(k));
0065                 <span class="keyword">end</span>
0066             <span class="keyword">end</span>
0067         <span class="keyword">end</span>
0068 
0069         <a name="_sub3" href="#_subfunctions" class="code">function tf = ne(lhs, rhs)</a>
0070         <span class="comment">% Test whether two objects refer to different symbolic variables.</span>
0071         <span class="comment">%</span>
0072         <span class="comment">% Inheritor classes do not need to override this method.</span>
0073 
0074             tf = ~<a href="#_sub3" class="code" title="subfunction tf = eq(lhs, rhs)">eq</a>(lhs, rhs);
0075         <span class="keyword">end</span>
0076         
0077         <a name="_sub4" href="#_subfunctions" class="code">function tf = lt(lhs, rhs)</a>
0078         <span class="comment">% Inheritor classes do not need to override this method.</span>
0079 
0080             <span class="keyword">if</span> isscalar(lhs) &amp;&amp; isscalar(rhs)
0081                 tf = <a href="#_sub12" class="code" title="subfunction tf = scalarlt(lhs, rhs)">scalarlt</a>(lhs, rhs);
0082             <span class="keyword">elseif</span> isscalar(rhs)
0083                 tf = false(size(lhs));
0084                 <span class="keyword">for</span> k = 1 : numel(lhs)
0085                     tf(k) = <a href="#_sub12" class="code" title="subfunction tf = scalarlt(lhs, rhs)">scalarlt</a>(lhs(k), rhs);
0086                 <span class="keyword">end</span>
0087             <span class="keyword">elseif</span> isscalar(lhs)
0088                 tf = false(size(rhs));
0089                 <span class="keyword">for</span> k = 1 : numel(rhs)
0090                     tf(k) = <a href="#_sub12" class="code" title="subfunction tf = scalarlt(lhs, rhs)">scalarlt</a>(lhs, rhs(k));
0091                 <span class="keyword">end</span>
0092             <span class="keyword">else</span>
0093                 assert(all(size(lhs) == size(rhs)), <span class="keyword">...</span><span class="comment">  % verify if they are compatible in size</span>
0094                     <span class="string">'math:symvariable:DimensionMismatch'</span>, <span class="keyword">...</span>
0095                     <span class="string">'Comparison attempted on symbolic variable arrays of incompatible size.'</span>);
0096 
0097                 tf = false(size(lhs));
0098                 <span class="keyword">for</span> k = 1 : numel(lhs)
0099                     tf(k) = <a href="#_sub12" class="code" title="subfunction tf = scalarlt(lhs, rhs)">scalarlt</a>(lhs(k), rhs(k));
0100                 <span class="keyword">end</span>
0101             <span class="keyword">end</span>
0102         <span class="keyword">end</span>
0103 
0104         <a name="_sub5" href="#_subfunctions" class="code">function [svsorted,ix] = sort(sv)</a>
0105         <span class="comment">% Sort symbolic variables in an array.</span>
0106 
0107             [~,ix] = <a href="#_sub6" class="code" title="subfunction [svsorted,ix] = sort(sv)">sort</a>(<a href="#_sub10" class="code" title="subfunction n = names(sv)">names</a>(sv));  <span class="comment">% stable sort for variable names</span>
0108             svsorted = sv(ix);
0109         <span class="keyword">end</span>
0110         
0111         <a name="_sub6" href="#_subfunctions" class="code">function str = char(sv)</a>
0112             str = sv.Name;
0113         <span class="keyword">end</span>
0114 
0115         <a name="_sub7" href="#_subfunctions" class="code">function disp(sv)</a>
0116             <span class="keyword">if</span> isempty(sv)
0117                 builtin(<span class="string">'disp'</span>, sv);
0118             <span class="keyword">elseif</span> isscalar(sv)
0119                 <a href="#_sub8" class="code" title="subfunction disp(sv)">disp</a>(<a href="#_sub7" class="code" title="subfunction str = char(sv)">char</a>(sv));
0120             <span class="keyword">elseif</span> ndims(sv) == 2
0121                 arr = cell(size(sv));
0122                 <span class="keyword">for</span> j = 1 : size(sv,2)
0123                     <span class="keyword">for</span> i = 1 : size(sv,1)
0124                         arr{i,j} = <a href="#_sub7" class="code" title="subfunction str = char(sv)">char</a>(sv(i,j));
0125                     <span class="keyword">end</span>
0126                 <span class="keyword">end</span>
0127                 width = max(cellfun(@length, arr), [], 1);  <span class="comment">% find largest column widths, force calculating maximum along rows</span>
0128                 <span class="keyword">for</span> i = 1 : size(sv,1)
0129                     fprintf(<span class="string">'['</span>);
0130                     <span class="keyword">for</span> j = 1 : size(sv,2)
0131                         fprintf(<span class="string">' %*s '</span>, width(j), arr{i,j});
0132                     <span class="keyword">end</span>
0133                     fprintf(<span class="string">']\n'</span>);
0134                 <span class="keyword">end</span>
0135             <span class="keyword">else</span>
0136                 dims = cell(1,2*ndims(sv)-1);
0137                 dims(1:2:end) = arrayfun(@int2str, size(sv), <span class="string">'UniformOutput'</span>, false);
0138                 dims(2:2:end) = {<span class="string">'x'</span>};
0139                 fprintf(<span class="string">'[%s %s]\n'</span>, cell2mat(dims), class(sv));
0140             <span class="keyword">end</span>
0141         <span class="keyword">end</span>
0142 
0143         <a name="_sub8" href="#_subfunctions" class="code">function display(sv)</a>
0144         <span class="comment">% Displays a symbolic variable object.</span>
0145 
0146             name = inputname(1);
0147             <span class="keyword">if</span> isempty(name)
0148                 name = <span class="string">'ans'</span>;
0149             <span class="keyword">end</span>
0150             fprintf(<span class="string">'%s =\n'</span>, name);
0151 
0152             s = size(sv);  <span class="comment">% is it a scalar or an array?</span>
0153             <span class="keyword">if</span> isempty(sv)
0154                 fprintf(<span class="string">'empty %s of size = [%s]\n'</span>, class(sv), int2str(s));
0155             <span class="keyword">elseif</span> any(s &gt; 1)  <span class="comment">% an array or vector</span>
0156                 fprintf(<span class="string">'%s array of size = [%s]\n'</span>, class(sv), int2str(s));
0157                 <span class="keyword">if</span> ndims(sv) &gt; 2
0158                     <a href="#_sub8" class="code" title="subfunction disp(sv)">disp</a>(<span class="string">''</span>);
0159                     sj = [0,ones(1,numel(s)-1)];
0160                     <span class="keyword">for</span> j = 1 : numel(sv)
0161                         <span class="comment">% convert linear index to subscript index</span>
0162                         sj(1) = sj(1)+1;
0163                         <span class="keyword">while</span> any(sj &gt; s)
0164                             k = find(sj &gt; s, 1, <span class="string">'first'</span>);
0165                             sj(k) = 1;
0166                             sj(k+1) = sj(k+1)+1;
0167                         <span class="keyword">end</span>
0168 
0169                         fprintf(<span class="string">'%s array element [%s]\n    %s\n'</span>, class(sv), int2str(sj), <a href="#_sub7" class="code" title="subfunction str = char(sv)">char</a>(sv(j)));
0170                     <span class="keyword">end</span>
0171                 <span class="keyword">else</span>  <span class="comment">% two-dimensional</span>
0172                     <a href="#_sub8" class="code" title="subfunction disp(sv)">disp</a>(sv);
0173                 <span class="keyword">end</span>
0174             <span class="keyword">elseif</span> isscalar(sv)  <span class="comment">% a scalar</span>
0175                 fprintf(<span class="string">'%s\n'</span>, <a href="#_sub7" class="code" title="subfunction str = char(sv)">char</a>(sv));
0176             <span class="keyword">end</span>
0177         <span class="keyword">end</span>
0178 
0179         <a name="_sub9" href="#_subfunctions" class="code">function n = names(sv)</a>
0180         <span class="comment">% Variable names for an array of symbolic variables.</span>
0181         <span class="comment">%</span>
0182         <span class="comment">% Output arguments:</span>
0183         <span class="comment">% names:</span>
0184         <span class="comment">%    a cell array of strings (row vectors of type char)</span>
0185 
0186             n = cell(numel(sv), 1);
0187             <span class="keyword">for</span> k = 1 : numel(sv)
0188                 n{k} = sv(k).Name;
0189             <span class="keyword">end</span>
0190         <span class="keyword">end</span>
0191     <span class="keyword">end</span>
0192     methods (Access = protected)
0193         <a name="_sub10" href="#_subfunctions" class="code">function tf = scalareq(lhs, rhs)</a>
0194         <span class="comment">% Test whether two scalar objects refer to the same variable.</span>
0195         <span class="comment">%</span>
0196         <span class="comment">% Inheritor classes have to override this method.</span>
0197 
0198             tf = strcmp(lhs.Name, rhs.Name);
0199         <span class="keyword">end</span>
0200         
0201         <a name="_sub11" href="#_subfunctions" class="code">function tf = scalarlt(lhs, rhs)</a>
0202         <span class="comment">% Inheritor classes have to override this method.</span>
0203 
0204             tf = ~strcmp(lhs.Name, rhs.Name) &amp;&amp; issorted({lhs.Name, rhs.Name});
0205         <span class="keyword">end</span>
0206     <span class="keyword">end</span>
0207 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Tue 10-Jul-2018 15:03:35 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>