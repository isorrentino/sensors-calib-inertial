<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of lowLevTauCtrlCalibratorSequenceProfile1</title>
  <meta name="keywords" content="lowLevTauCtrlCalibratorSequenceProfile1">
  <meta name="description" content="We support two control modes: position and pwm.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # src --><!-- ../menu.html conf --><!-- menu.html advanced -->
<h1>lowLevTauCtrlCalibratorSequenceProfile1
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>We support two control modes: position and pwm.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> We support two control modes: position and pwm.
 Before this script is run, 'motor' is set to the joints/motors group
 being calibrated. Here we are running the calibration of the Coulomb and
 viscuous friction parameters calibration (1rst phase). The targeted joint
 is kept in PWM control (PWM = 0).</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../src/@SensorDataAcquisition/getSeqProfile.html" class="code" title="function [seqHomeParams,seqEndParams,selector] = getSeqProfile(task,taskSpecificParams)">getSeqProfile</a>	getSeqProfile Loads the sequence profile parameters from a script ini file</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% We support two control modes: position and pwm.</span>
0002 <span class="comment">% Before this script is run, 'motor' is set to the joints/motors group</span>
0003 <span class="comment">% being calibrated. Here we are running the calibration of the Coulomb and</span>
0004 <span class="comment">% viscuous friction parameters calibration (1rst phase). The targeted joint</span>
0005 <span class="comment">% is kept in PWM control (PWM = 0).</span>
0006 
0007 
0008 <span class="comment">%% Home single step sequence</span>
0009 
0010 <span class="comment">% For limbs and torso calibration</span>
0011 homeCalib.labels = {<span class="keyword">...</span>
0012     <span class="string">'ctrl'</span>,<span class="string">'ctrl'</span>,<span class="string">'ctrl'</span>,<span class="string">'ctrl'</span>,<span class="string">'ctrl'</span>,<span class="string">'ctrl'</span>;<span class="keyword">...</span>
0013     <span class="string">'pos'</span>,<span class="string">'pos'</span>,<span class="string">'pos'</span>,<span class="string">'pos'</span>,<span class="string">'pos'</span>,<span class="string">'pos'</span>;
0014     <span class="string">'left_arm'</span>,<span class="string">'right_arm'</span>,<span class="string">'left_leg'</span>,<span class="string">'right_leg'</span>,<span class="string">'torso'</span>,<span class="string">'head'</span>};
0015 homeCalib.val = {<span class="keyword">...</span>
0016     [0 45 0 50 0 0 0],<span class="keyword">...</span>
0017     [0 45 0 50 0 0 0],<span class="keyword">...</span>
0018     [0 10 0 0 0 0],<span class="keyword">...</span>
0019     [0 10 0 0 0 0],<span class="keyword">...</span>
0020     [0 0 0],<span class="keyword">...</span>
0021     [0 0 0]};
0022 
0023 <span class="comment">%% Motion sequences</span>
0024 <span class="comment">% (a single sequence is intended to move all defined parts synchronously,</span>
0025 <span class="comment">% motions from 2 different sequences should be run asynchronously)</span>
0026 <span class="comment">% each calibPart should be calibrated within a single sequence.</span>
0027 
0028 <span class="comment">% Prompt strings definition</span>
0029 NA = @() []; <span class="comment">% no prompt</span>
0030 promptStr = @() [<span class="keyword">...</span>
0031     <span class="string">'Calibrating the friction parameters (Kc, Kv) of joint/motor '</span> motor <span class="string">'.\n'</span> <span class="keyword">...</span>
0032     <span class="string">'Move joint back and forth and press any key when done..\n'</span>];
0033 
0034 <span class="comment">% define tables for each limb</span>
0035 left_arm_seqParams.labels = {<span class="keyword">...</span>
0036     <span class="string">'prpt'</span>   ,<span class="string">'mode'</span>   ,<span class="string">'ctrl'</span>               ,<span class="string">'ctrl'</span>          ,<span class="string">'meas'</span>     ,<span class="string">'meas'</span>     ,<span class="string">'pwmctrl'</span>;<span class="keyword">...</span>
0037     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'pos'</span>                ,<span class="string">'vel'</span>           ,<span class="string">'joint'</span>    ,<span class="string">'jtorq'</span>    ,<span class="string">'pwm'</span>    ;<span class="keyword">...</span>
0038     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'left_arm'</span>           ,<span class="string">'left_arm'</span>      ,<span class="string">'left_arm'</span> ,<span class="string">'left_arm'</span> ,motor };
0039 left_arm_seqParams.val = {<span class="keyword">...</span>
0040     NA       ,<span class="string">'ctrl'</span>   ,homeCalib.val{1}     ,repmat( 4,[1 7]),false      ,false      ,0        ;<span class="keyword">...</span>
0041     promptStr,<span class="string">'pwmctrl'</span>,homeCalib.val{1}     ,repmat( 4,[1 7]),true       ,true       ,0        };
0042 
0043 right_arm_seqParams.labels = {<span class="keyword">...</span>
0044     <span class="string">'prpt'</span>   ,<span class="string">'mode'</span>   ,<span class="string">'ctrl'</span>               ,<span class="string">'ctrl'</span>          ,<span class="string">'meas'</span>     ,<span class="string">'meas'</span>     ,<span class="string">'pwmctrl'</span>;<span class="keyword">...</span>
0045     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'pos'</span>                ,<span class="string">'vel'</span>           ,<span class="string">'joint'</span>    ,<span class="string">'jtorq'</span>    ,<span class="string">'pwm'</span>    ;<span class="keyword">...</span>
0046     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'right_arm'</span>          ,<span class="string">'right_arm'</span>     ,<span class="string">'right_arm'</span>,<span class="string">'right_arm'</span>,motor };
0047 right_arm_seqParams.val = left_arm_seqParams.val;
0048 
0049 left_leg_seqParams.labels = {<span class="keyword">...</span>
0050     <span class="string">'prpt'</span>   ,<span class="string">'mode'</span>   ,<span class="string">'ctrl'</span>               ,<span class="string">'ctrl'</span>          ,<span class="string">'meas'</span>     ,<span class="string">'meas'</span>     ,<span class="string">'pwmctrl'</span>;<span class="keyword">...</span>
0051     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'pos'</span>                ,<span class="string">'vel'</span>           ,<span class="string">'joint'</span>    ,<span class="string">'jtorq'</span>    ,<span class="string">'pwm'</span>    ;<span class="keyword">...</span>
0052     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'left_leg'</span>           ,<span class="string">'left_leg'</span>      ,<span class="string">'left_leg'</span> ,<span class="string">'left_leg'</span> ,motor };
0053 left_leg_seqParams.val = {<span class="keyword">...</span>
0054     NA       ,<span class="string">'ctrl'</span>   ,homeCalib.val{3}     ,repmat( 4,[1 6]),false      ,false      ,0        ;<span class="keyword">...</span>
0055     promptStr,<span class="string">'pwmctrl'</span>,homeCalib.val{3}     ,repmat( 4,[1 6]),true       ,true       ,0        };
0056 
0057 right_leg_seqParams.labels = {<span class="keyword">...</span>
0058     <span class="string">'prpt'</span>   ,<span class="string">'mode'</span>   ,<span class="string">'ctrl'</span>               ,<span class="string">'ctrl'</span>          ,<span class="string">'meas'</span>     ,<span class="string">'meas'</span>     ,<span class="string">'pwmctrl'</span>;<span class="keyword">...</span>
0059     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'pos'</span>                ,<span class="string">'vel'</span>           ,<span class="string">'joint'</span>    ,<span class="string">'jtorq'</span>    ,<span class="string">'pwm'</span>    ;<span class="keyword">...</span>
0060     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'right_leg'</span>          ,<span class="string">'right_leg'</span>     ,<span class="string">'right_leg'</span>,<span class="string">'right_leg'</span>,motor };
0061 right_leg_seqParams.val = left_leg_seqParams.val;
0062 
0063 torso_seqParams.labels = {<span class="keyword">...</span>
0064     <span class="string">'prpt'</span>   ,<span class="string">'mode'</span>   ,<span class="string">'ctrl'</span>               ,<span class="string">'ctrl'</span>          ,<span class="string">'meas'</span>     ,<span class="string">'meas'</span>     ,<span class="string">'pwmctrl'</span>;<span class="keyword">...</span>
0065     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'pos'</span>                ,<span class="string">'vel'</span>           ,<span class="string">'joint'</span>    ,<span class="string">'jtorq'</span>    ,<span class="string">'pwm'</span>    ;<span class="keyword">...</span>
0066     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'torso'</span>              ,<span class="string">'torso'</span>         ,<span class="string">'torso'</span>    ,<span class="string">'torso'</span>    ,motor };
0067 torso_seqParams.val = {<span class="keyword">...</span>
0068     NA       ,<span class="string">'ctrl'</span>   ,homeCalib.val{5}     ,repmat( 4,[1 3]),false      ,false      ,0        ;<span class="keyword">...</span>
0069     promptStr,<span class="string">'pwmctrl'</span>,homeCalib.val{5}     ,repmat( 4,[1 3]),true       ,true       ,0        };
0070 
0071 head_seqParams.labels = {<span class="keyword">...</span>
0072     <span class="string">'prpt'</span>   ,<span class="string">'mode'</span>   ,<span class="string">'ctrl'</span>               ,<span class="string">'ctrl'</span>          ,<span class="string">'meas'</span>     ,<span class="string">'meas'</span>     ,<span class="string">'pwmctrl'</span>;<span class="keyword">...</span>
0073     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'pos'</span>                ,<span class="string">'vel'</span>           ,<span class="string">'joint'</span>    ,<span class="string">'jtorq'</span>    ,<span class="string">'pwm'</span>    ;<span class="keyword">...</span>
0074     <span class="string">'NA'</span>     ,<span class="string">'NA'</span>     ,<span class="string">'head'</span>               ,<span class="string">'head'</span>          ,<span class="string">'head'</span>     ,<span class="string">'head'</span>     ,motor };
0075 head_seqParams.val = {<span class="keyword">...</span>
0076     NA       ,<span class="string">'ctrl'</span>   ,homeCalib.val{6}     ,repmat( 4,[1 3]),false      ,false      ,0        ;<span class="keyword">...</span>
0077     promptStr,<span class="string">'pwmctrl'</span>,homeCalib.val{6}     ,repmat( 4,[1 3]),true       ,true       ,0        };
0078 
0079 <span class="comment">% define Home and End sequences for limbs and torso calibration</span>
0080 seqHomeParams{1} = homeCalib;
0081 seqEndParams     = homeCalib;
0082 
0083 <span class="comment">% Map parts to sequences and params</span>
0084 selector.calibedParts = {<span class="keyword">...</span>
0085     <span class="string">'left_arm'</span>,<span class="string">'right_arm'</span>,<span class="keyword">...</span>
0086     <span class="string">'left_leg'</span>,<span class="string">'right_leg'</span>,<span class="keyword">...</span>
0087     <span class="string">'torso'</span>,<span class="string">'head'</span>};
0088 selector.calibedSensors = {<span class="keyword">...</span>
0089     {<span class="string">'LLTctrl'</span>},{<span class="string">'LLTctrl'</span>},<span class="keyword">...</span>
0090     {<span class="string">'LLTctrl'</span>},{<span class="string">'LLTctrl'</span>},<span class="keyword">...</span>
0091     {<span class="string">'LLTctrl'</span>},{<span class="string">'LLTctrl'</span>}};
0092 selector.setIdx  = {1,1,1,1,1,1}; <span class="comment">% max index must not exceed max index of seqHomePArams</span>
0093 selector.seqParams = {<span class="keyword">...</span>
0094     left_arm_seqParams,right_arm_seqParams,<span class="keyword">...</span>
0095     left_leg_seqParams,right_leg_seqParams,<span class="keyword">...</span>
0096     torso_seqParams,head_seqParams};</pre></div>
<hr><address>Generated on Tue 10-Jul-2018 15:03:35 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>