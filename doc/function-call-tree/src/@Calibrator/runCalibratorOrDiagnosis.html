<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of runCalibratorOrDiagnosis</title>
  <meta name="keywords" content="runCalibratorOrDiagnosis">
  <meta name="description" content="Harvest the parameters and runs the calibration task">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # src --><!-- menu.html @Calibrator -->
<h1>runCalibratorOrDiagnosis
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Harvest the parameters and runs the calibration task</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function runCalibratorOrDiagnosis(obj,init,model,calibOrDiagFuncH,calibedSensorType) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Harvest the parameters and runs the calibration task
 
 [in] init :              application script init config parameters
 [in] acqSensorDataAccessor :    acquired data accessor
 [in] calibedSensor :            sensor modality to be calibrated</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="Calibrator.html" class="code" title="">Calibrator</a>	</li><li><a href="run.html" class="code" title="function run(obj,init,model,lastAcqSensorDataAccessorMap)">run</a>	Calibrates the sensors using the data accessed through 'lastAcqSensorDataAccessorMap'</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function runCalibratorOrDiagnosis(obj,init,model,calibOrDiagFuncH,calibedSensorType)</a>
0002 
0003 <span class="comment">% Harvest the parameters and runs the calibration task</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% [in] init :              application script init config parameters</span>
0006 <span class="comment">% [in] acqSensorDataAccessor :    acquired data accessor</span>
0007 <span class="comment">% [in] calibedSensor :            sensor modality to be calibrated</span>
0008 
0009 <span class="comment">% unwrap the parameters specific to the calibration task</span>
0010 Init.unWrap(init.(obj.initSection));
0011 acqSensorDataAccessor = obj.acqSensorDataAccessorMap(obj.task);
0012 
0013 <span class="comment">% Get data folder path list for joints calibration on required parts.</span>
0014 <span class="comment">% If the prior sensor data acquisition was done in N motion sequences</span>
0015 <span class="comment">% (it is the case for calibrating the torso which needs a dedicated</span>
0016 <span class="comment">% sequence), we get a folder path per sequence, so N paths.</span>
0017 <span class="comment">% TEMP SOLUTION FOR CALIB. THE TORSO JOINTS --&gt; set &lt;calibedSensorType&gt; to 'acc'.</span>
0018 [dataFolderPathList,calibedPartsList] = <span class="keyword">...</span>
0019     acqSensorDataAccessor.getFolderPaths4calibedSensor(calibedSensorType,init.dataPath);
0020 
0021 <span class="comment">% For each sequence, get the logged sensors list and respective</span>
0022 <span class="comment">% supporting parts</span>
0023 [measedSensorLists,measedPartsLists] = acqSensorDataAccessor.getMeasedSensorsParts();
0024 
0025 <span class="comment">% In the case of joint encoders calibration, if the torso has to be</span>
0026 <span class="comment">% calibrated, it should be before the arms since their orientation depends</span>
0027 <span class="comment">% on the torso. In the below loop processing, 'calibrationMap' (input/output)</span>
0028 <span class="comment">% is updated at each call to 'calibrateSensors'.</span>
0029 cellfun(@(folderPath,calibedParts,measedSensorList,measedPartsList) <span class="keyword">...</span>
0030     calibOrDiagFuncH(<span class="keyword">...</span>
0031     folderPath,calibedParts,measedSensorList,measedPartsList,<span class="keyword">...</span><span class="comment"> % params we iterate on</span>
0032     model,taskSpecificParams),<span class="keyword">...</span><span class="comment">                                % params common to all sequences</span>
0033     dataFolderPathList,calibedPartsList,measedSensorLists,measedPartsLists); <span class="comment">% cellfun iterates over these lists</span>
0034 
0035 <span class="comment">% Save calibration</span>
0036 <span class="keyword">if</span> init.saveCalibration
0037     model.saveCalibToFile();
0038 <span class="keyword">end</span>
0039 
0040 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Tue 10-Jul-2018 15:03:35 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>